{% extends "oncl_app/admin_base.html" %}

{% block content %}

{% load static %}

{% load humanize %}

<title>View Student Info.</title>

<style>  

{% if student.gender == 'Male' %}

:root {
  --light_color: #e0f2f1;
  --dark_color: #b2dfdb;
}

{% else %}

:root {
  --light_color: #e1f5fe;
  --dark_color: #b3e5fc;
}

{% endif %}

body {
  background-color: var(--light_color);
}

.card {
  box-shadow: 6px 6px 0px -2px var(--dark_color);
  border-radius: 10px;
}

.card:hover {
 transform: None;
}

.hidden{
  display : none;
}
</style>

<div class="container" style="margin-top: 50px;">
    <div class="main-body">  
          <div class="row gutters-sm">
            <div class="col-md-4 mb-3">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex flex-column align-items-center text-center">
                    <img src="{{ student.profile_pic.url }}" alt="Student_Profile Pic" style="border-radius: 5px; border: 2px solid #bdbdbd;" width="200" height="220">
                    <div class="mt-3">
                      <h4>{{student.user.first_name}}</h4>
                      <p class="text-secondary mb-1"> Student </p>
                      <p class="text-muted font-size-sm"><span><a style="text-decoration: none; color: #6c757d!important;" href="https://www.google.com/maps/place/{{student.city_name}}" target="_blank"><i class="fas fa-map-marked-alt"></i> {{student.city_name}} - {{student.zip_code}}</a></span></p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card mt-3">
                <ul class="list-group list-group-flush">
                  <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                    <h6 class="mb-0"><i class="fab fa-linkedin" style="font-size: 24px;"></i> </h6>
                    <span class="text-secondary"><a style="text-decoration: none; color: #6c757d!important;" href="https://www.linkedin.com/in/{{student.linkedin_link}}"></a></span>
                  </li>
                  <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                    <h6 class="mb-0"><i class="fab fa-github-square" style="font-size: 24px;"></i> </h6>
                    <span class="text-secondary"><a style="text-decoration: none; color: #6c757d!important;" href="https://www.linkedin.com/in/{{student.linkedin_link}}"></a></span>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-md-8">
              <div class="card mb-3">
                <div class="card-body">
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Full Name</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                        {{student.user.first_name}} {{student.user.last_name}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Username</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                        {{student.user.username}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Email</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                        <a style="text-decoration: none; color: #6c757d!important;" href="mailto:{{student.user.email}}">{{student.user.email}}</a>
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Gender</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{ student.gender }}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Branch</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{ student.branch }}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Phone</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      <a style="text-decoration: none; color: #6c757d!important;" href="tel:Mobile : +91{{student.phone}}">{{student.phone}}</a>
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Address</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      <span><a style="text-decoration: none; color: #6c757d!important;" href="https://www.google.com/maps/place/{{student.city_name}}" target="_blank">{{ student.dno_sn }}, {{ student.city_name }}, {{student.state_name}}, {{student.country_name}} - {{student.zip_code}}</a></span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row gutters-sm" style="justify-content: start">
                
                <div class="card h-100" style="margin-top: 20px; margin-bottom: 40px;">
                  <div class="card-body">
                    <h5 class="d-flex align-items-center mb-3"><i class="fas fa-flag-checkered"></i> &nbsp;Recent Login Activity</h5>
                    <p>
                      {% if student.user.last_login == None %} Not Logged In Yet!
                    </p>
                      {% else %} 
                    <p>Your recent login is <b>{{ student.user.last_login|naturaltime }}.</b> </p>
                    <p>                      
                       You have logged in on <b>{{ student.user.last_login|date:"l, dS F, Y" }}</b> at <b>{{ student.user.last_login|date:"H:i:s A" }}</b>
                    </p>
                    <span style="color: #ec407a; cursor: pointer;" onclick="showhide()"><b>Check Complete Login Activity</b></span>
                    <br><br>
                    <div id="newpost" class="hidden">
                      {% for i in sld %}
                      <div style="margin: 0; padding: 0;">
                       <div style="background-color: #b3e5fc; padding: 20px; border-radius: 10px; margin: 0;">
                       <p style="margin: 0; padding: 0;">From <b>{{ i.ip_addr }}</b></p>
                       <p style="margin: 0; padding: 0;">
                       You have logged in on <b>{{ i.created_at|date:"l, dS F, Y" }}</b> at <b>{{ i.created_at|date:"H:i:s A" }}</b>
                       </p>
                      </div>
                       <br>
                       </div>
                      {% endfor %}
                      </div>
                      
                      {% endif %}                    
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
    </div>

    <script>
      function showhide() {
        var div = document.getElementById("newpost");
        div.classList.toggle('hidden');
      }
    </script>

{% endblock %}
