{% extends "oncl_app/base.html" %}

{% block content %}

{% load static %}

<title>Academic Statistics | OnCl - Edu. Cloud</title>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.2.0/chart.min.js"></script>
<style>
a {
    font-weight: bolder;
}

.dv_class {
    text-align: center; 
    margin: 10px;
    font-size: x-large;
}
   @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap');

  .starter-template {
      padding: 3rem 1.5rem 0.5rem 1.5rem;
      text-align: center;
  }
  .display-1{
    font-size:calc(1.625rem + 4.5vw);
    font-weight:300;
    line-height:1.2;
    color: #039be5;
    font-family: 'Montserrat', sans-serif;
  }
        
  @media (min-width:1200px){
    .display-1{
        font-size: 3rem;
    }
  }
</style>

<!-- <div style="font-weight: bolder; color: #FFF; background-color: #4fc3f7; margin: 20px; padding: 10px; border-radius: 5px; display: flex; flex-direction: row; flex-wrap: wrap; align-content: space-between; justify-content: space-evenly; align-items: center;">
<h5><b>Branches Abbreviation</b></h5>
    <p>CSE: Computer Science and Engineering &nbsp;</p>
    <p>CE: Chemical Engineering &nbsp;</p>
    <p>AE: Aerospace/Aeronautical Engineering &nbsp;</p>
    <p>CE: Civil Engineering &nbsp;</p>
    <p>EE: Electrical/Electronic Engineering &nbsp;</p>
    <p>ME: Mechanical Engineering &nbsp;</p>
    <p>ECE: Electronics and Communication Engineering &nbsp;</p>
</div> -->

<body onload="startTime()">
    <div style="text-align: center;">
        <div id="alertMessage">
            <label id="lblGreetings"></label>
        </div>    
        <div id="alertMessage3">
            <div id="txt"></div>
            <div id="txt1"></div>
        </div>
    </div>
</body>

<div style="margin-top: 5%; display: flex; flex-direction: row; flex-wrap: wrap; align-content: center; justify-content: space-around; align-items: center;">
    <div style="height:20rem; width:20rem; padding: 20px;">
        <canvas id="staff_student_count" ></canvas>
        <div class="dv_class"><label for="staff_student_count"><b>Faculty - Student Ratio</b></label></div>
    </div>
    <div style="height:20rem; width:20rem; padding: 20px;"">
        <canvas id="gender_student_count" ></canvas>
        <div class="dv_class"><label for="gender_student_count"><b>Student - Gender Ratio</b></label></div>
    </div>
    <div style="height:22rem; width:22rem; padding: 20px;"">
        <canvas id="total_counts" ></canvas>
        <div class="dv_class"><label for="total_counts"><b>Coures in Branch Info.</b></label></div>
    </div>
</div>

<script>
    $(function(){
  //   $('#alertMessage').hide().delay(500).fadeIn(1100);
    $('#alertMessage2').hide().delay(1000).fadeIn(1100);
    $('#alertMessage3').hide().delay(1500).fadeIn(1100);
    });

  function startTime() {
  var d = new Date();

  var date_ = d.getDate();
  var year_ = d.getFullYear();
  var weekday = new Array(7);
  weekday[0] = "Sunday";
  weekday[1] = "Monday";
  weekday[2] = "Tuesday";
  weekday[3] = "Wednesday";
  weekday[4] = "Thursday";
  weekday[5] = "Friday";
  weekday[6] = "Saturday";

  var weekday_ = weekday[d.getDay()];

  var month = new Array();
  month[0] = "January";
  month[1] = "February";
  month[2] = "March";
  month[3] = "April";
  month[4] = "May";
  month[5] = "June";
  month[6] = "July";
  month[7] = "August";
  month[8] = "September";
  month[9] = "October";
  month[10] = "November";
  month[11] = "December";

  var month_ = month[d.getMonth()];

  var h = d.getHours();
  var m = d.getMinutes();
  var s = d.getSeconds();
  m = checkTime(m);
  s = checkTime(s);
  document.getElementById('txt').innerHTML =
  '<h5>' + month_ + " " + date_ + " " + weekday_ + ", " + " " + year_ + '</h5>';
  document.getElementById('txt1').innerHTML =
  '<h5>' + h + ":" + m + ":" + s + '</h5>';
  var t = setTimeout(startTime, 500);
  }
  function checkTime(i) {
  if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
  return i;
  }

  var _date = new Date();
  var hrs = _date.getHours();
  var greet;

  if (hrs >= 0 && hrs < 12) {
      greet = 'Good Morning';
  }
  else if (hrs >= 12 && hrs < 17) {
      greet = 'Good Afternoon';
  }
  else {
      greet = 'Good Evening';
  }
  
  document.getElementById('lblGreetings').innerHTML =
      '<main role="main" class="container">'+
      '<div class="starter-template">'+
      '<h1 class="display-1"> ' + greet + '!</h1>'+
      '<div id="alertMessage2">'+
      '<h3 style="color:#76e989;"><b>Everything Sounds Good!</b></h3>'+
      '</div>'+
      '</div>'+
      '</main>';

      function refreshAt(hours, minutes, seconds) {
          var now = new Date();
          var then = new Date();

          if(now.getHours() > hours ||
          (now.getHours() == hours && now.getMinutes() > minutes) ||
              now.getHours() == hours && now.getMinutes() == minutes && now.getSeconds() >= seconds) {
              then.setDate(now.getDate() + 1);
          }
          then.setHours(hours);
          then.setMinutes(minutes);
          then.setSeconds(seconds);

          var timeout = (then.getTime() - now.getTime());
          setTimeout(function() { 
              window.location.reload(true); 
          }, timeout);
      }

      $(document).ready(function() {
          refreshAt(12,00,00);
          refreshAt(17,00,00);
          refreshAt(00,00,00);
      });
</script>

<script>
var branch_list = {{ branch_list|safe }};
var subject_count_list = {{ subject_count_list }};
var ctx = document.getElementById('total_counts').getContext('2d');
var total_counts = new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: branch_list,
        datasets: [{
            data: subject_count_list,
            backgroundColor: [
            'rgb(255, 99, 132)',
            'rgb(54, 162, 235)',
            'rgb(32, 201, 151)',
            'rgb(255, 205, 86)',
            'rgb(39, 39, 39)',
            'rgb(149, 117, 205)',
            'rgb(248, 249, 250)'
            ],
        }]
    },
});

var ctx = document.getElementById('staff_student_count').getContext('2d');
var staff_student_count = new Chart(ctx, {
    type: 'pie',
    data: {
        labels: ['Faculty', 'Student'],
        datasets: [{
            data: [{{staff_count}},{{student_count}}],
            backgroundColor: [
            'rgb(54, 162, 235, 0.2)',
            'rgb(32, 201, 151, 0.2)'
            ],
            borderColor: [
            'rgb(54, 162, 235)',
            'rgb(32, 201, 151)',
            ],
            borderWidth: 1
        }]
    },
});

var ctx = document.getElementById('gender_student_count').getContext('2d');
var gender_student_count = new Chart(ctx, {
    type: 'pie',
    data: {
        labels: ['Female', 'Male'],
        datasets: [{
            data: [{{female_count}},{{male_count}}],
            backgroundColor: [
            'rgb(255, 99, 132, 0.2)',
            'rgb(54, 162, 235, 0.2)'
            ],
            borderColor: [
            'rgb(255, 99, 132)',
            'rgb(54, 162, 235)',
            ],
            borderWidth: 1
        }]
    },
});
</script>

{% endblock %}